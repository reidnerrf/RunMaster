type Lang = 'pt' | 'en';
let current: Lang = 'pt';

// Try to load saved language preference
try {
  const saved = localStorage.getItem('runmaster_lang');
  if (saved === 'en' || saved === 'pt') {
    current = saved;
  }
} catch {}

const dict: Record<Lang, Record<string, string>> = {
  pt: {
    home_welcome: 'Pronto para correr?',
    home_start: 'Iniciar Corrida',
    home_quick_start: 'Início Rápido',
    home_goals: 'Metas',
    home_suggested_routes: 'Rotas Sugeridas',
    home_recent_activities: 'Atividades Recentes',
    home_achievements: 'Conquistas',
    home_quick_actions: 'Ações Rápidas',
    home_favorites: 'Favoritos',
    home_saved_routes: 'Rotas salvas',
    home_no_saved_routes: 'Nenhuma rota salva',
    home_create_route: 'Criar Rota',
    workouts_title: 'Treinos',
    workouts_sub: 'Plano adaptativo semanal',
    workouts_generate_again: 'Gerar novamente',
    workouts_no_plan: 'Nenhum plano de treino',
    workouts_generate_plan: 'Gerar Plano',
    stats_title: 'Estatísticas',
    stats_subtitle: 'Seu progresso em números',
    stats_total_runs: 'Total de Corridas',
    stats_total_distance: 'Distância Total',
    stats_avg_pace: 'Pace Médio',
    stats_avg_heart_rate: 'Frequência Cardíaca Média',
    stats_weekly_progress: 'Progresso Semanal',
    stats_monthly_progress: 'Progresso Mensal',
    explorer_title: 'Explorar',
    explorer_subtitle: 'Descubra novas rotas e pontos secretos',
    explorer_search_placeholder: 'Buscar rotas...',
    explorer_filters: 'Filtros',
    explorer_no_routes: 'Nenhuma rota encontrada',
    explorer_no_secret_points: 'Nenhum ponto secreto encontrado',
    explorer_location_permission_error: 'Permissão de localização necessária',
    community_title: 'Comunidade',
    community_subtitle: 'Conecte-se com outros corredores',
    community_my_communities: 'Minhas Comunidades',
    community_discover: 'Descobrir',
    community_no_communities: 'Nenhuma comunidade encontrada',
    community_create_community: 'Criar Comunidade',
    profile_title: 'Perfil',
    profile_subtitle: 'Suas configurações e dados',
    profile_edit_profile: 'Editar Perfil',
    profile_settings: 'Configurações',
    profile_permissions: 'Permissões',
    profile_goals: 'Metas',
    profile_badges: 'Badges',
    profile_history: 'Histórico',
    profile_no_runs: 'Nenhuma corrida registrada',
    profile_start_running: 'Começar a Correr',
    run_title: 'Corrida',
    run_start: 'Iniciar',
    run_pause: 'Pausar',
    run_stop: 'Parar',
    run_resume: 'Retomar',
    run_weather: 'Clima',
    run_time: 'Tempo',
    run_distance: 'Distância',
    run_pace: 'Pace',
    run_heart_rate: 'Freq. Cardíaca',
    run_altitude: 'Altitude',
    run_calories: 'Calorias',
    auth_login: 'Entrar',
    auth_signup: 'Cadastrar',
    auth_email: 'E-mail',
    auth_password: 'Senha',
    auth_forgot_password: 'Esqueceu a senha?',
    auth_no_account: 'Não tem uma conta?',
    auth_has_account: 'Já tem uma conta?',
    auth_social_login: 'Ou entre com',
    onboarding_title: 'Bem-vindo ao RunTracker',
    onboarding_subtitle: 'Vamos configurar sua experiência',
    onboarding_step_1: 'Qual é seu objetivo principal?',
    onboarding_step_2: 'Qual horário prefere correr?',
    onboarding_step_3: 'Que tipo de terreno prefere?',
    onboarding_step_4: 'Permissões necessárias',
    onboarding_goal_fitness: 'Fitness',
    onboarding_goal_weight_loss: 'Perda de Peso',
    onboarding_goal_competition: 'Competição',
    onboarding_goal_recreation: 'Recreação',
    onboarding_time_morning: 'Manhã',
    onboarding_time_afternoon: 'Tarde',
    onboarding_time_evening: 'Noite',
    onboarding_terrain_road: 'Asfalto',
    onboarding_terrain_trail: 'Trilha',
    onboarding_terrain_mixed: 'Misto',
    onboarding_permissions_gps: 'GPS',
    onboarding_permissions_notifications: 'Notificações',
    onboarding_permissions_health: 'Dados de Saúde',
    onboarding_next: 'Próximo',
    onboarding_skip: 'Pular',
    onboarding_finish: 'Finalizar',
    common_loading: 'Carregando...',
    common_error: 'Erro',
    common_success: 'Sucesso',
    common_retry: 'Tentar novamente',
    common_cancel: 'Cancelar',
    common_save: 'Salvar',
    common_delete: 'Excluir',
    common_edit: 'Editar',
    common_add: 'Adicionar',
    common_remove: 'Remover',
    common_yes: 'Sim',
    common_no: 'Não',
    common_ok: 'OK',
    common_close: 'Fechar',
    common_back: 'Voltar',
    common_next: 'Próximo',
    common_previous: 'Anterior',
    common_finish: 'Finalizar',
    common_skip: 'Pular',
    common_continue: 'Continuar',
    common_done: 'Concluído',
    common_view_all: 'Ver todas'
  },
  en: {
    home_welcome: 'Ready to run?',
    home_start: 'Start Run',
    home_quick_start: 'Quick Start',
    home_goals: 'Goals',
    home_suggested_routes: 'Suggested Routes',
    home_recent_activities: 'Recent Activities',
    home_achievements: 'Achievements',
    home_quick_actions: 'Quick Actions',
    home_favorites: 'Favorites',
    home_saved_routes: 'Saved Routes',
    home_no_saved_routes: 'No saved routes',
    home_create_route: 'Create Route',
    workouts_title: 'Workouts',
    workouts_sub: 'Weekly adaptive plan',
    workouts_generate_again: 'Generate again',
    workouts_no_plan: 'No workout plan',
    workouts_generate_plan: 'Generate Plan',
    stats_title: 'Statistics',
    stats_subtitle: 'Your progress in numbers',
    stats_total_runs: 'Total Runs',
    stats_total_distance: 'Total Distance',
    stats_avg_pace: 'Average Pace',
    stats_avg_heart_rate: 'Average Heart Rate',
    stats_weekly_progress: 'Weekly Progress',
    stats_monthly_progress: 'Monthly Progress',
    explorer_title: 'Explore',
    explorer_subtitle: 'Discover new routes and secret points',
    explorer_search_placeholder: 'Search routes...',
    explorer_filters: 'Filters',
    explorer_no_routes: 'No routes found',
    explorer_no_secret_points: 'No secret points found',
    explorer_location_permission_error: 'Location permission required',
    community_title: 'Community',
    community_subtitle: 'Connect with other runners',
    community_my_communities: 'My Communities',
    community_discover: 'Discover',
    community_no_communities: 'No communities found',
    community_create_community: 'Create Community',
    profile_title: 'Profile',
    profile_subtitle: 'Your settings and data',
    profile_edit_profile: 'Edit Profile',
    profile_settings: 'Settings',
    profile_permissions: 'Permissions',
    profile_goals: 'Goals',
    profile_badges: 'Badges',
    profile_history: 'History',
    profile_no_runs: 'No runs recorded',
    profile_start_running: 'Start Running',
    run_title: 'Run',
    run_start: 'Start',
    run_pause: 'Pause',
    run_stop: 'Stop',
    run_resume: 'Resume',
    run_weather: 'Weather',
    run_time: 'Time',
    run_distance: 'Distance',
    run_pace: 'Pace',
    run_heart_rate: 'Heart Rate',
    run_altitude: 'Altitude',
    run_calories: 'Calories',
    auth_login: 'Login',
    auth_signup: 'Sign Up',
    auth_email: 'Email',
    auth_password: 'Password',
    auth_forgot_password: 'Forgot password?',
    auth_no_account: "Don't have an account?",
    auth_has_account: 'Already have an account?',
    auth_social_login: 'Or continue with',
    onboarding_title: 'Welcome to RunTracker',
    onboarding_subtitle: "Let's set up your experience",
    onboarding_step_1: 'What is your main goal?',
    onboarding_step_2: 'What time do you prefer to run?',
    onboarding_step_3: 'What type of terrain do you prefer?',
    onboarding_step_4: 'Required permissions',
    onboarding_goal_fitness: 'Fitness',
    onboarding_goal_weight_loss: 'Weight Loss',
    onboarding_goal_competition: 'Competition',
    onboarding_goal_recreation: 'Recreation',
    onboarding_time_morning: 'Morning',
    onboarding_time_afternoon: 'Afternoon',
    onboarding_time_evening: 'Evening',
    onboarding_terrain_road: 'Road',
    onboarding_terrain_trail: 'Trail',
    onboarding_terrain_mixed: 'Mixed',
    onboarding_permissions_gps: 'GPS',
    onboarding_permissions_notifications: 'Notifications',
    onboarding_permissions_health: 'Health Data',
    onboarding_next: 'Next',
    onboarding_skip: 'Skip',
    onboarding_finish: 'Finish',
    common_loading: 'Loading...',
    common_error: 'Error',
    common_success: 'Success',
    common_retry: 'Retry',
    common_cancel: 'Cancel',
    common_save: 'Save',
    common_delete: 'Delete',
    common_edit: 'Edit',
    common_add: 'Add',
    common_remove: 'Remove',
    common_yes: 'Yes',
    common_no: 'No',
    common_ok: 'OK',
    common_close: 'Close',
    common_back: 'Back',
    common_next: 'Next',
    common_previous: 'Previous',
    common_finish: 'Finish',
    common_skip: 'Skip',
    common_continue: 'Continue',
    common_done: 'Done',
    common_view_all: 'View All'
  }
};

export function setLang(lang: Lang) { 
  current = lang; 
  try {
    localStorage.setItem('runmaster_lang', lang);
  } catch {}
}
export function t(key: string): string { return dict[current][key] || key; }

